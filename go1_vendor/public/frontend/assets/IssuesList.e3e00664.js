var k=(w,v,r)=>new Promise((m,l)=>{var p=i=>{try{f(r.next(i))}catch(_){l(_)}},a=i=>{try{f(r.throw(i))}catch(_){l(_)}},f=i=>i.done?m(i.value):Promise.resolve(i.value).then(p,a);f((r=r.apply(w,v)).next())});import{_ as B,a as I}from"./AppHeader.5d85f85a.js";import{u as P,y as b,r as D,c as C,D as R,A as U,o as c,f as d,n as o,g as u,w as y,p as n,j as N,t as V,K as A,R as G,S as J,N as M,P as $,Y as H,W as h,x as K,L as T,Z as W,$ as Y,T as Z,a0 as q,a1 as Q}from"./vendor.c4b27f65.js";import"./index.294163e1.js";const X={class:"flex h-screen w-screen"},F={class:"h-full border-r bg-gray-50"},ee={class:"flex-1 flex flex-col h-full"},te={class:"h-full w-full flex flex-col"},se={class:"flex mt-4 mb-4 px-5 justify-between"},ae={class:"flex"},le={class:"ml-6 mt-1"},oe={key:0,class:"px-5 flex-1 flex flex-col overflow-auto"},ne={key:0},re={key:1},ie={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ce={key:2},de={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ue={class:"w-full mt-2"},me={class:"flex justify-between items-center"},ve={__name:"IssuesList",setup(w){const v=P(),r=b([]),m=b([]),l=D({}),p=b(20),a=C({url:"go1_vendor.apidata.get_issues",params:{field_filters:JSON.stringify(l)},method:"GET"}),f=C({url:"go1_vendor.api.get_issues",method:"GET"}),i=()=>{v.push({name:"Issues"})},_=()=>k(this,null,function*(){const s=(yield f.fetch()).fields;r.value=[],m.value=[],m.value.push({fieldname:"name",fieldtype:"Data",options:null,label:"ID"}),r.value.push({label:"Name",key:"name",width:2}),s.forEach(t=>{t.in_list_view&&r.value.push({label:t.label,key:t.fieldname,width:t.width}),t.in_standard_filter&&m.value.push(t)})}),O=e=>{e&&e.name?v.push({name:"Issues Detail",params:{id:e.name}}):console.error("Row data is invalid:",e)};R(p,e=>{a.limit=e,a.fetch()}),R(l,e=>{a.params={field_filters:JSON.stringify(l)},a.fetch();for(let s in e)(e[s]===null||e[s]==="")&&delete e[s]});const S=e=>{switch(e){case"Draft":return{theme:"red"};case"Overdue":return{theme:"blue"};case"Cancelled":return{theme:"green"};case"Return":return{theme:"orange"};default:return{theme:"gray"}}},j=()=>{Object.keys(l).forEach(e=>{delete l[e]}),a.fetch()},z=e=>({Select:q,Color:h,Date:Q,Link:h,TextEditor:h,Data:h,ReadOnly:"ReadOnlyComponent"})[e.fieldtype]||h,E=e=>({Select:{options:L(e.options),placeholder:e.label},Link:{size:"sm",variant:"subtle",placeholder:e.label},Date:{size:"sm",placeholder:e.label},Data:{size:"sm",variant:"subtle",placeholder:e.label},TextEditor:{placeholder:e.label,variant:"subtle"}})[e.fieldtype]||{},L=e=>e?e.split(`
`).map(s=>({label:s,value:s})):[];return U(()=>{_(),a.fetch()}),(e,s)=>(c(),d("div",X,[o("div",F,[u(B)]),o("div",ee,[o("div",te,[u(I,null,{createbutton:y(()=>[u(n(N),{variant:"solid",theme:"gray",size:"sm",label:"Button",loading:!1,loadingText:null,disabled:!1,onClick:i},{default:y(()=>s[2]||(s[2]=[V(" + Create ")])),_:1})]),_:1}),A(e.$slots,"default"),o("div",se,[o("div",ae,[(c(!0),d(G,null,J(m.value,t=>(c(),d("div",{class:"p-1 w-36",key:t.fieldname},[(c(),M(H(z(t)),$({ref_for:!0},E(t),{modelValue:l[t.fieldname],"onUpdate:modelValue":x=>l[t.fieldname]=x}),null,16,["modelValue","onUpdate:modelValue"]))]))),128))]),o("div",le,[u(n(N),{variant:"subtle",theme:"gray",size:"sm",onClick:j},{default:y(()=>s[3]||(s[3]=[V(" Reset")])),_:1})])]),n(a).data?(c(),d("div",oe,[u(n(W),{class:"flex-1 overflow-auto",columns:r.value,rows:n(a).data,options:{getRowRoute:t=>({name:"Issues Detail",params:{id:t.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found",description:"Create a new record to get started",button:{label:"New Record",variant:"solid",onClick:()=>console.log("New Record")}}},"row-key":"name",onRowClick:O},{cell:y(({item:t,row:x,column:g})=>[g.key==="status"?(c(),d("div",ne,[u(n(K),$(S(t),{size:"sm",label:t}),null,16,["label"])])):g.key==="naming_series"?(c(),d("div",re,[o("span",ie,T(t),1)])):(c(),d("div",ce,[o("span",de,T(t),1)]))]),_:1},8,["columns","rows","options"]),o("div",ue,[o("div",me,[u(n(Y),{modelValue:p.value,options:{rowCount:n(a).data.length,totalCount:n(a).data.length},"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),onLoadMore:s[1]||(s[1]=t=>n(a).fetch()),class:"w-full"},null,8,["modelValue","options"])])])])):Z("",!0)])])]))}};export{ve as default};
