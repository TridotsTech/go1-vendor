var v=(h,y,l)=>new Promise((c,i)=>{var n=o=>{try{d(l.next(o))}catch(m){i(m)}},p=o=>{try{d(l.throw(o))}catch(m){i(m)}},d=o=>o.done?c(o.value):Promise.resolve(o.value).then(n,p);d((l=l.apply(h,y)).next())});import{_ as S,a as E}from"./AppHeader.5d85f85a.js";import{u as O,y as r,D as I,A as z,o as C,f as P,n as f,g as t,K as $,p as u,W as b,a2 as N,j as w}from"./vendor.c4b27f65.js";import"./index.294163e1.js";const R={class:"flex h-screen w-screen"},U={class:"h-full border-r bg-gray-50"},D={class:"flex-1 flex flex-col h-full overflow-auto"},A={class:"grid grid-cols-1 gap-6 p-10 w-full overflow-auto"},B={class:"p-2"},H={class:"float-right flex gap-4"},K={__name:"Issues",setup(h){const y=O(),l=r(""),c=r(""),i=r(""),n=r(""),p=r(""),d=r([]),o=r([]),m=r([{label:"Issues",route:{name:"Issues"}},{label:"Create Issue",route:{}}]),g=[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"}],_=()=>{l.value="",c.value="",i.value="",p.value="",n.value=""},V=()=>v(this,null,function*(){const a=[{value:l.value,message:"Subject is required."},{value:n.value,message:"priority is required."}];for(const{value:e,message:k}of a)if(!e){alert(k);return}const s={subject:l.value,status:c.value,priority:n.value,description:i.value,supplier:p.value};try{if(!(yield fetch("/api/resource/Issue",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Error creating issue");y.push({name:"IssuesList"})}catch(e){console.error("Error creating issue:",e)}}),j=()=>v(this,null,function*(){try{const a=yield fetch('/api/resource/Supplier?fields=["name"]');if(!a.ok)throw new Error("Network response was not ok");const s=yield a.json();d.value=s.data.map(e=>e.name)||[]}catch(a){console.error("Error fetching supplier:",a)}}),x=()=>v(this,null,function*(){try{const a=yield fetch('/api/resource/Issue Priority?fields=["name"]');if(!a.ok)throw new Error("Network response was not ok");const s=yield a.json();o.value=s.data.map(e=>e.name)||[]}catch(a){console.error("Error fetching priorities:",a)}});return I(l,a=>{m.value[1].label=a}),z(()=>v(this,null,function*(){yield j(),yield x()})),(a,s)=>(C(),P("div",R,[f("div",U,[t(S)]),f("div",D,[t(E),$(a.$slots,"default"),f("div",A,[f("div",B,[t(u(b),{type:"text",size:"md",variant:"subtle",placeholder:"subject",label:"Subject * ",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),class:"mb-5"},null,8,["modelValue"]),t(u(b),{type:"select",size:"md",options:g,variant:"subtle",placeholder:"status",label:"Status",modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),class:"mb-5 text-gray-1000 text-base"},null,8,["modelValue"]),t(u(b),{type:"select",size:"md",variant:"subtle",options:d.value,label:"Supplier",modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=e=>p.value=e),class:"mb-5"},null,8,["options","modelValue"]),t(u(N),{type:"textarea",variant:"subtle",size:"xxl",placeholder:"Placeholder",label:"Description",modelValue:i.value,"onUpdate:modelValue":s[3]||(s[3]=e=>i.value=e),class:"mb-5"},null,8,["modelValue"]),t(u(b),{type:"select",size:"md",variant:"subtle",options:o.value,placeholder:"Placeholder",label:"Priority * ",modelValue:n.value,"onUpdate:modelValue":s[4]||(s[4]=e=>n.value=e),class:"mb-5"},null,8,["options","modelValue"]),f("div",H,[t(u(w),{variant:"subtle",theme:"gray",size:"md",label:"Discard",onClick:_}),t(u(w),{variant:"solid",theme:"gray",size:"md",label:"Submit",onClick:V})])])])])]))}};export{K as default};
