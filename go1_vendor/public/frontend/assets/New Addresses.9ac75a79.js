var g=(C,k,u)=>new Promise((p,m)=>{var b=d=>{try{v(u.next(d))}catch(n){m(n)}},c=d=>{try{v(u.throw(d))}catch(n){m(n)}},v=d=>d.done?p(d.value):Promise.resolve(d.value).then(b,c);v((u=u.apply(C,k)).next())});import{_ as R}from"./AppSidebar.e6135d3f.js";import{u as W,n as s,c as j,B as F,o as S,f as I,p as t,g as o,M as J,q as a,V as r,x as N,y as B,a3 as E,j as O}from"./vendor.df9a4b93.js";import"./index.ba59bafc.js";const G={class:"flex h-screen w-screen"},H={class:"h-full border-r bg-gray-50"},K={class:"flex-1 flex flex-col h-full overflow-auto"},Q={class:"main-content justify-items-center grid grid-cols-1 py-10 h-[550px]"},X={class:"grid grid-cols-1 content-start gap-3 m-2 w-8/12 bg-white border rounded-md pb-5"},Y={class:"grid grid-cols-1 p-3"},Z={class:"grid grid-cols-3 md:grid-cols-3 gap-3 justify-items-stretch text-gray-800"},ee={class:"p-2"},le={class:"p-2"},ae={class:"flex justify-end gap-4 mt-1"},re={__name:"New Addresses",setup(C){const k=W(),u=s(""),p=s(""),m=s(""),b=s(""),c=s(""),v=s(""),d=s(""),n=s(""),V=s(""),_=s(""),x=s(!1),w=s(!1),U=s([]),z=s(""),y=s("Supplier"),A=s(""),P=j({url:"go1_vendor.apidata.get_test",cache:["true"]});P.fetch();const h=P,T=(i=1e3)=>g(this,null,function*(){try{const e=yield fetch(`/api/resource/Country?fields=["country_name"]&limit=${i}`);if(!e.ok)throw new Error("Network response was not ok");const l=yield e.json();U.value=l.data.map(f=>f.country_name)||[]}catch(e){console.error("Error fetching Country:",e)}}),$=[{label:"Billing",value:"Billing"},{label:"Shipping",value:"Shipping"},{label:"Office",value:"Office"},{label:"Personal",value:"Personal"},{label:"Postal",value:"Postal"},{label:"Shop",value:"Shop"},{label:"Subsidiary",value:"Subsidiary"},{label:"Warehouse",value:"Warehouse"},{label:"Current",value:"Current"},{label:"Permanent",value:"Permanent"},{label:"Other",value:"Other"}],q=()=>{u.value="",p.value="",m.value="",b.value="",c.value="",v.value="",d.value="",n.value="",V.value="",_.value="",x.value=!1,w.value=!1},D=()=>g(this,null,function*(){const i=[{value:u.value,message:"Address Title is required."},{value:p.value,message:"Address Type is required."},{value:m.value,message:"Address line1 is required."},{value:c.value,message:"City is required."},{value:n.value,message:"Country is required."}];for(const{value:l,message:f}of i)if(!l){alert(f);return}const e={address_title:u.value,address_type:p.value,city:c.value,address_line1:m.value,address_line2:b.value,state:v.value,pincode:d.value,country:n.value,email_id:V.value,phone:_.value,is_primary_address:x.value,is_shipping_address:w.value};z.value&&(e.links=[{link_doctype:y,link_name:z.value}]);try{const l=yield fetch("/api/resource/Address",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!l.ok){const f=yield l.text();throw new Error(`Error creating address: ${f}`)}k.push({name:"Addresses"})}catch(l){console.error("Error creating address:",l)}}),L=j({url:"go1_vendor.api.get_supplier",cache:["data"],auto:!0}),M=()=>g(this,null,function*(){try{const i=yield L.fetch();A.value=i,console.log("Fetched data:",A.value),z.value=A.value[0]}catch(i){console.error("Error fetching data:",i)}});return F(()=>g(this,null,function*(){yield T(),M()})),(i,e)=>(S(),I("div",G,[t("div",H,[o(R)]),t("div",K,[e[16]||(e[16]=t("div",{class:"mb-2 border-b p-4"},[t("span",null,"New Address")],-1)),J(i.$slots,"default"),t("div",Q,[t("div",X,[e[15]||(e[15]=t("div",{class:"px-3 py-3 border-b"},[t("div",{class:"flex justify-between items-center"},[t("span",{class:"text-xl text-cyan-600 font-semibold"}," New Address")])],-1)),t("div",Y,[e[14]||(e[14]=t("div",{class:"mb-5 text-lg font-medium"},[t("h1",null,"Details:")],-1)),t("div",Z,[o(a(r),{type:"text",size:"md",variant:"subtle",label:"Address Title",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),class:"mb-5"},null,8,["modelValue"]),o(a(r),{type:"select",size:"md",options:$,variant:"subtle",label:"Address Type",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value=l),class:"mb-5"},null,8,["modelValue"]),o(a(r),{type:"text",size:"md",variant:"subtle",label:"Address Line 1",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=l=>m.value=l),class:"mb-5"},null,8,["modelValue"]),o(a(r),{type:"text",size:"md",variant:"subtle",label:"Address Line 2",modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=l=>b.value=l),class:"mb-5"},null,8,["modelValue"]),o(a(r),{type:"text",size:"md",variant:"subtle",label:"City",modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l),class:"mb-5"},null,8,["modelValue"]),o(a(r),{type:"text",size:"md",variant:"subtle",label:"State",modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=l=>v.value=l),class:"mb-5"},null,8,["modelValue"]),o(a(r),{type:"select",size:"md",variant:"subtle",label:"Country * ",modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value=l),options:U.value,class:"mb-5"},null,8,["modelValue","options"]),o(a(r),{size:"md",variant:"subtle",label:"Postal Code",modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=l=>d.value=l),class:"mb-5"},null,8,["modelValue"]),o(a(r),{type:"email",size:"md",variant:"subtle",label:"Email",modelValue:V.value,"onUpdate:modelValue":e[8]||(e[8]=l=>V.value=l),class:"mb-5"},null,8,["modelValue"]),o(a(r),{size:"md",variant:"subtle",label:"Phone",modelValue:_.value,"onUpdate:modelValue":e[9]||(e[9]=l=>_.value=l),class:"mb-5"},null,8,["modelValue"]),a(h).data?(S(),N(a(r),{key:0,type:y.value,size:"md",variant:"subtle",label:"Link Doctype",modelValue:y.value,"onUpdate:modelValue":e[10]||(e[10]=l=>y.value=l),disabled:!0,class:"mb-5"},null,8,["type","modelValue"])):B("",!0),a(h).data?(S(),N(a(r),{key:1,type:y.value,size:"md",variant:"subtle",label:"Link Name",disabled:!0,modelValue:a(h).data,"onUpdate:modelValue":e[11]||(e[11]=l=>a(h).data=l),class:"mb-5"},null,8,["type","modelValue"])):B("",!0),t("div",ee,[o(a(E),{size:"sm",modelValue:x.value,"onUpdate:modelValue":e[12]||(e[12]=l=>x.value=l),label:"Preferred Billing Address"},null,8,["modelValue"])]),t("div",le,[o(a(E),{size:"sm",modelValue:w.value,"onUpdate:modelValue":e[13]||(e[13]=l=>w.value=l),label:"Preferred Shipping Address"},null,8,["modelValue"])])]),t("div",ae,[o(a(O),{variant:"subtle",theme:"gray",size:"md",label:"Discard",onClick:q}),o(a(O),{variant:"solid",theme:"gray",size:"md",label:"Submit",onClick:D})])])])])])]))}};export{re as default};
