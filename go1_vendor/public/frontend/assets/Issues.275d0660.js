var b=(w,y,o)=>new Promise((p,u)=>{var c=l=>{try{v(o.next(l))}catch(d){u(d)}},m=l=>{try{v(o.throw(l))}catch(d){u(d)}},v=l=>l.done?p(l.value):Promise.resolve(l.value).then(c,m);v((o=o.apply(w,y)).next())});import{_ as C}from"./AppSidebar.e6135d3f.js";import{u as R,n as r,c as T,F as U,B,o as V,f as D,p as a,g as n,q as i,V as f,x as P,y as $,a2 as q,j as x}from"./vendor.df9a4b93.js";import"./index.ba59bafc.js";const A={class:"flex h-screen w-screen"},H={class:"h-full border-r bg-gray-50"},L={class:"flex-1 flex flex-col h-full overflow-auto"},F={class:"main-content justify-items-center grid grid-cols-1 py-10 overflow-auto"},J={class:"grid grid-cols-1 content-start gap-3 m-2 w-4/6 bg-white border rounded-md"},M={class:"grid grid-cols-1 p-3"},G={class:"grid grid-cols-3 gap-6 overflow-auto"},K={class:"justify-end flex gap-4"},Z={__name:"Issues",setup(w){const y=R(),o=r(""),p=r(""),u=r(""),c=r(""),m=r(""),v=r([]),l=r([]),d=r([]),g=r([]),h=T({url:"go1_vendor.apidata.get_test",cache:["true"]});h.fetch();const _=h,j=r([{label:"Issues",route:{name:"Issues"}},{label:"Create Issue",route:{}}]),k=[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"}],I=()=>{o.value="",p.value="",u.value="",m.value="",c.value="",d.value=""},S=()=>b(this,null,function*(){const t=[{value:o.value,message:"Subject is required."},{value:c.value,message:"priority is required."}];for(const{value:s,message:z}of t)if(!s){alert(z);return}const e={subject:o.value,status:p.value,priority:c.value,description:u.value,custom_supplier:m.value};try{if(!(yield fetch("/api/resource/Issue",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Error creating issue");y.push({name:"IssuesList"})}catch(s){console.error("Error creating issue:",s)}}),E=()=>b(this,null,function*(){try{const t=yield fetch('/api/resource/Supplier?fields=["name"]');if(!t.ok)throw new Error("Network response was not ok");const e=yield t.json();v.value=e.data.map(s=>s.name)||[]}catch(t){console.error("Error fetching supplier:",t)}}),N=()=>b(this,null,function*(){try{const t=yield fetch('/api/resource/Issue Type?fields=["name"]');if(!t.ok)throw new Error("Network response was not ok");const e=yield t.json();g.value=e.data.map(s=>s.name)||[]}catch(t){console.error("Error fetching IssueType:",t)}}),O=()=>b(this,null,function*(){try{const t=yield fetch('/api/resource/Issue Priority?fields=["name"]');if(!t.ok)throw new Error("Network response was not ok");const e=yield t.json();l.value=e.data.map(s=>s.name)||[]}catch(t){console.error("Error fetching priority:",t)}});return U(o,t=>{j.value[1].label=t}),B(()=>b(this,null,function*(){yield E(),yield O(),yield N()})),(t,e)=>(V(),D("div",A,[a("div",H,[n(C)]),a("div",L,[e[8]||(e[8]=a("div",{class:"mb-2 border-b p-4"},[a("span",null,"New Issue")],-1)),a("div",F,[a("div",J,[e[7]||(e[7]=a("div",{class:"px-3 py-3 border-b"},[a("div",{class:"flex justify-between items-center"},[a("span",{class:"text-xl text-cyan-600 font-semibold"}," New Issue")])],-1)),a("div",M,[e[6]||(e[6]=a("div",{class:"mb-5 text-lg font-medium"},[a("h1",null,"Details:")],-1)),a("div",G,[n(i(f),{type:"text",size:"md",variant:"subtle",placeholder:"Subject",label:"Subject",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s),class:""},null,8,["modelValue"]),n(i(f),{type:"select",size:"md",options:k,variant:"subtle",placeholder:"Status",label:"Status",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),class:"text-gray-1000 text-base"},null,8,["modelValue"]),i(_).data?$("",!0):(V(),P(i(f),{key:0,type:"select",size:"md",variant:"subtle",options:v.value,label:"Supplier",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),placeholder:"Supplier",class:""},null,8,["options","modelValue"])),n(i(q),{type:"textarea",variant:"subtle",size:"md",placeholder:"Description",label:"Description",modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=s=>u.value=s),class:""},null,8,["modelValue"]),n(i(f),{type:"select",size:"md",variant:"subtle",options:g.value,placeholder:"Issue type",label:"Issue Type* ",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),class:"mb-3"},null,8,["options","modelValue"]),n(i(f),{type:"select",size:"md",variant:"subtle",options:l.value,placeholder:"Priority",label:"Priority * ",modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=s=>c.value=s),class:"mb-3"},null,8,["options","modelValue"])]),a("div",K,[n(i(x),{variant:"subtle",theme:"gray",size:"md",label:"Discard",onClick:I}),n(i(x),{variant:"solid",theme:"gray",size:"md",label:"Submit",onClick:S})])])])])])]))}};export{Z as default};
